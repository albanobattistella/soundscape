FIND_PACKAGE(Qt6 COMPONENTS Test REQUIRED)

MACRO(UNIT_TEST source_file_name)
  GET_FILENAME_COMPONENT(TESTNAME ${source_file_name} NAME_WE)
  ADD_EXECUTABLE(${TESTNAME} ${source_file_name})
  TARGET_LINK_LIBRARIES(${TESTNAME} PRIVATE ${APP_LIB} Qt::Test)
  ADD_TEST(NAME ${TESTNAME} COMMAND ${TESTNAME})
ENDMACRO(UNIT_TEST)

SET(CMAKE_AUTOMOC ON)
INCLUDE_DIRECTORIES(${CMAKE_SOURCE_DIR}/src)

UNIT_TEST(TestJsonRW.cpp)
